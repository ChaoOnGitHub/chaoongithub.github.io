{"pages":[{"title":"categories","text":"","path":"categories/index.html"},{"title":"about","text":"","path":"about/index.html"},{"title":"tags","text":"","path":"tags/index.html"}],"posts":[{"title":"数据单元包含多条数据怎么办：数据拆分小技巧","text":"今天遇到一个数据拆分的问题，觉着有必要记录下来。在做数据处理时，我们会经常遇到一个数据单元格包含多个数据的情况，例如如下的数据: 上图红框中，Licensing_TRANSFEROR列的单元格中含有3值，并且以“；”分割。而在后续的共现分析、网络分析等多种分析则要求我们应该将其拆分成三条数据。这时我们可以尝试用到pandas中的stack、reset_index和join等方法。 具体代码示例如下： 导入pandas 12import pandas as pdfrom pandas import DataFrame,Series 读入数据 12raw_data=pd.read_excel('./2008-2017.xlsx',header=0)raw_data.columns 数据拆分 1raw_tor=raw_data.drop('Licensing_TRANSFEROR',axis=1).join(raw_data['Licensing_TRANSFEROR'].str.split(';',expand=True).stack().reset_index(level=1,drop=True).rename('Licensing_TRANSFEROR')) 其中： stack：该方法可以参考pandas.DataFrame.stack，参数如下： Parameters: level : int, string, or list of these, default last. dropna : boolean, default True.&lt;br&gt; Returns: stacked : DataFrame or Series 该方法可以认为是将数据的一轴旋转堆叠，返回具有层次索引的DataFrame，默认是对最内层轴，返回结果自动排序，官方给出的例子如下： 12345678910&gt;&gt;&gt;s a bone 1. 2.two 3. 4.&gt;&gt;&gt;s.stack()one a 1 b 2two a 3 b 4 reset_index：该方法可以参考pandas.DataFrame.reset_index，参数如下： 该方法可以实现对指定的列的重新索引，官方例子如下： Parameters:&lt;br&gt; level : int, str, tuple, or list, default None. drop : boolean, default False. inplace : boolean, default False. col_level : int or str, default 0. col_fill : object, default . &lt;br&gt; Returns: &lt;br&gt; resetted : DataFrame 该方法可以实现对指定的列的重新索引，官方例子如下： 1234567891011121314151617181920&gt;&gt;&gt;df = pd.DataFrame([('bird', 389.0),... ('bird', 24.0),... ('mammal', 80.5),... ('mammal', np.nan)],... index=['falcon', 'parrot', 'lion', 'monkey'],... columns=('class', 'max_speed'))&gt;&gt;&gt;df class max_speedfalcon bird 389.0parrot bird 24.0lion mammal 80.5monkey mammal NaN&gt;&gt;&gt;df.reset_index(drop=True) class max_speed0 bird 389.01 bird 24.02 mammal 80.53 mammal NaN 数据导出 1raw_tor.to_excel('./2008-2017_new.xlsx') 处理结果如下： 最后，数据拆分还是能用到很多分析之中，具体到上面这个案例是在分析专利许可数据。后期的让与人和受让人之间的专利许可网络分析、专利权人社会网络分析都要首先进行该处理。 参考文献 https://www.cnblogs.com/lemonbit/p/7270045.html&lt;br&gt; http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.reset_index.html&lt;br&gt; http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.stack.html","path":"2018/04/07/数据单元包含多条数据怎么办：数据拆分小技巧/"},{"title":"博客搬家啦~","text":"博客搬家啦 今天开始，博客正式搬家了，来到了github.io，这一圣地。 我的github地址：ChaoOnGithub。&lt;br&gt; 这里算是自己的技术随想、生活感悟和三言两语的精神家园!","path":"2018/04/06/博客搬家啦/"}]}